webpackJsonp([6],{17:function(t,e,n){n(45);var i=n(25)(n(32),n(60),null,null);i.options.__file="E:\\git\\source_tree\\smileFace\\dr_pc_web\\nodejsSever\\static\\activity\\app\\smileFace\\src\\module\\main\\play.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] play.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},25:function(t,e){t.exports=function(t,e,n,i){var s,a=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(s=t,a=t.default);var r="function"==typeof a?a.options:a;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),n&&(r._scopeId=n),i){var c=Object.create(r.computed||null);Object.keys(i).forEach(function(t){var e=i[t];c[t]=function(){return e}}),r.computed=c}return{esModule:s,exports:a,options:r}}},26:function(t,e,n){"use strict";t.exports={httpStatus:"/activity/november/smile/status.do",httpParticipate:"/activity/november/smile/participate.do",httpChance:"/activity/november/smile/chance.do",httpHomeData:"/activity/november/smile/rank.do",httpCheckRegister:"/register/existMobilePhone.do",httpPlay:"/activity/november/smile/game.do",httpMyInvest:"/activity/november/smile/money.do",httpGetSign:"/activity/november/smile/game_init.do",httpUserInfo:"/expose/member.do",httpRegisterBase:"http://app.duorongcf.com/"}},27:function(t,e,n){"use strict";(function(e){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(28);var a=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(a),r=e("body");t.exports=function(){function t(n){i(this,t);var s=this;this.config={title:"",content:null,okBtn:!0,okCls:"",nextBtn:!1,cancelBtn:!0,cancelCls:"",width:null,okTxt:"确定",nextTxt:"下一步",cancelTxt:"取消",history:!0,okCallback:function(){s.close()},cancelCallback:function(){s.close()},close:!0,closeCallback:function(){},windowClose:!0,superClass:"",class:"",time:.5,mask:!1,maskTiming:"mask",timing:"rotate3d",timingTime:0,openDone:function(){}},e.extend(this.config,n),this.init()}return s(t,[{key:"init",value:function(){var t=this.config.timing;"rotate3d"!=t&&"slideOutUp"!=t&&"fadeIn"!=t&&"slideOutDown"!=t||(this.config.timingTime=50),1==this.config.mask?this.config.timing="":this.config.maskTiming="";var n=e("<div class='pop "+this.config.maskTiming+"'><div data-width='555' data-height='454' class='pop-cnt img-size "+this.config.timing+"'><div class='close'><div class='v-line'></div><div class='h-line'></div></div><div class='title'></div><div class='content'></div><div class='error'></div><div class='submit'><div class='btn okbtn img-size'  data-width='326' data-height='60' data-lineHeight='60'></div><div class='btn next'></div><div class='btn unbind'></div></div></div></div>");this.element={elem:n,title:n.find(".title"),close:n.find(".close"),bg:n.find(".pop-cnt"),content:n.find(".content"),submit:n.find(".submit"),okbtn:n.find(".okbtn"),nextbtn:n.find(".next"),cancelbtn:n.find(".unbind"),error:n.find(".error")},this.updateElement()}},{key:"updateElement",value:function(){var t=this.element,e=this.config,n=e.time+"s";t.okbtn.addClass(e.okCls).html(e.okTxt),t.nextbtn.html(e.nextTxt),t.cancelbtn.addClass(e.cancelCls).html(e.cancelTxt),1==e.mask&&this.addContent("<div class='loading'></div>"),t.title.html(e.title),e.content&&this.add(function(){return e.content}),t.elem.addClass(e.superClass),t.bg.addClass(e.class),t.bg.css({"transition-duration":n,"animation-duration":n}),t.bg.css({"-webkit-transition-duration":n,"-webkit-animation-duration":n}),e.width&&t.bg.css({width:e.width}),e.title.length<2&&t.title.remove(),0==e.okBtn&&t.okbtn.remove(),0==e.nextBtn&&t.nextbtn.remove(),0==e.cancelBtn&&t.cancelbtn.remove(),0==e.okBtn&&0==e.cancelBtn&&t.submit.remove(),0==e.close&&t.close.remove()}},{key:"add",value:function(t){var e=this,n=this.element,i=this;return n.elem.parent().length?i.close():(r.append(n.elem),this.addContent(t),setTimeout(function(){n.bg.addClass("cur")},i.config.timingTime),o.default.body.css({overflowY:"hidden"}),i.history(),setTimeout(function(){e.updateEvent(),i.config.openDone()},i.config.time+20)),n.content}},{key:"addContent",value:function(t){var e=this.element.content;t&&"function"==typeof t?e.html(t.call(e)):e.html(t),setTimeout(function(){o.default.setImgSize()},100)}},{key:"history",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=this;t.config.history&&(history.pushState({status:"mask"},""),window.maskSelf||(window.maskSelf=[]),maskSelf.push(t),window.onpopstate=function(t){maskSelf.length&&(maskSelf[maskSelf.length-1].back(),maskSelf.pop())})})},{key:"unbind",value:function(t,e,n,i){function s(){t.removeClass("unbind").text(o),a.unbind(t,e,n,i)}var a=this,o=t.text();n=n||o,i=i||3,t.unbind().click(function(){t.unbind().addClass("unbind").text(n),e(),setTimeout(s,1e3*i)})}},{key:"updateEvent",value:function(){var t=this,e=this.element,n=this.config;o.default.myAddListener(e.close,"mousedown",function(e){e.stopPropagation(),t.close()}),o.default.myAddListener(e.elem,"mousedown",function(e){e.stopPropagation(),n.windowClose&&t.close()}),o.default.myAddListener(e.bg,"mousedown",function(t){t.stopPropagation()}),1==n.okBtn&&o.default.myAddListener(e.okbtn,"mousedown",function(e){e.stopPropagation(),n.okCallback.call(t)}),1==n.nextBtn&&o.default.myAddListener(e.nextbtn,"mousedown",function(e){e.stopPropagation(),n.nextCallback.call(t)}),1==n.cancelBtn&&o.default.myAddListener(e.cancelbtn,"mousedown",function(e){e.stopPropagation(),n.cancelCallback.call(t)})}},{key:"error",value:function(t,e){var n=this.element.error,i=this.element.bg,s=this.config.time;i.addClass("errorcur"),n.html(t).addClass("cur"),setTimeout(function(){i.removeClass("errorcur"),i.css({"animation-duration":"0s"}),i.css({"-webkit-animation-duration":"0s"}),setTimeout(function(){i.css({"animation-duration":s+"s"}),i.css({"-webkit-animation-duration":s+"s"})},1e3*s+10)},1e3*s+10)}},{key:"hideError",value:function(){this.element.error.html("").removeClass("cur succee"),this.element.bg.removeClass("errorcur")}},{key:"succee",value:function(t){var e=t.time||.1,n=this,i=this.element.error,s=this.config.time;i.html(t.txt).addClass("cur succee"),setTimeout(function(){n.hideError(),t.callback&&t.callback()},1e3*s+1e3*e)}},{key:"close",value:function(){this.config.history?history.back():this.back(),this.config.closeCallback()}},{key:"back",value:function(t){var n=this.element;n.bg.removeClass("cur"),setTimeout(function(){n.elem.remove(),t&&"function"==e.type(t)&&t(),o.default.body.css({overflowY:"auto"})},510)}}]),t}()}).call(e,n(3))},28:function(t,e){},32:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(26),s=n(8),a=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={data:function(){return{gameBegin:!1,beginCounter:3,chanceNum:0,investEnough:!1,clockItv:void 0,score:0,roundScore:0,hasWrong:!1,isRoundOver:!1,miliseconds:6e4,faceBox:[],rowCounter:0,showGame:!1,overReason:void 0,isOnBusy:!1}},filters:{className:function(t,e){return 0===t?e?"f0-gold":"f0":"f"+t}},computed:{seconds:function(){var t=6e4-this.miliseconds,e=Math.floor(t%1e3/10);return(t<1e4?"0":"")+Math.floor(t/1e3)+"."+(e<10?"0":"")+e}},watch:{miliseconds:function(t,e){0===t&&this.sendPlayResult()},hasWrong:function(t,e){!0===t&&this.sendPlayResult()}},mounted:function(){t.setImgSize(),t.mobile(),t.getAppInfo(),t.isLogin?this.getInitData():t.login()},methods:{__requestService:function(e,i,s){t.ajax({url:e,data:i,callback:!0,success:function(t){if(!t.success&&!t.hasOwnProperty("errorMsg")){var e=n(27);new e({title:"&nbsp;",content:"操作失败，请联系客服！",okBtn:!0,cancelBtn:!1,timing:"rotate3d",okTxt:"确定"});return!1}s(t)}})},getInitData:function(){var e=this;if(!t.isLogin)return!1;var n={uid:t.uid};this.__requestService(i.httpChance+"?uid="+t.uid,n,function(t){return 0==t.success&&t.hasOwnProperty("errorMsg")?((0,a.default)("warning",{props:{transition:"bounceIn",title:"系统提示",detail:t.errorMsg,btnBackHome:!1}}),!1):(e.chanceNum=t.map.totalchance,e.score=t.map.smileTotal,e.chanceNum<=0?((0,a.default)("playResult",{props:{transition:"bounceIn",popState:1}}),bus.$on("closePopEvent",function(){e.onBack()}),!1):void e.getMyInvest())})},getMyInvest:function(){var e=this,n={uid:t.uid};this.__requestService(i.httpMyInvest,n,function(t){if(0==t.success&&t.hasOwnProperty("errorMsg"))return(0,a.default)("warning",{props:{transition:"bounceIn",title:"系统提示",detail:t.errorMsg,btnBackHome:!0}}),!1;t.map.amountDistance<=0&&(e.investEnough=!0),e.getGameSign()})},getGameSign:function(){var e=this,n={uid:t.uid};this.__requestService(i.httpGetSign,n,function(t){if(0==t.success&&t.hasOwnProperty("errorMsg"))return(0,a.default)("warning",{props:{transition:"bounceIn",title:"系统提示",detail:t.errorMsg,btnBackHome:!0}}),!1;e.sign=t.map.uuid,e.gameRun()})},gameRun:function(){function e(t){for(var e=[],n=0;n<4;n++){var i=Math.floor(5*Math.random());0===i&&(t.scorePoint>=80&&(i=Math.ceil(4*Math.random())),t.scorePoint++),e.push({faceno:n+1,type:i,status:0})}return{rowno:++t.rowCounter,data:e}}var n=this;this.scorePoint=0,this.faceBox.push(e(this)),setTimeout(function(){function i(t){return t=-1!=t.indexOf("px")?100*parseInt(t.substr(0,t.length-2))/s:parseFloat(t.substr(0,t.length-1))}t.setImgSize();var s=document.getElementsByClassName("play-box")[0].style.height;s=parseFloat(s.substr(0,s.length-2));var a=100/s,o=setInterval(function(){n.beginCounter>1?n.beginCounter--:(clearInterval(o),n.gameBegin=!0,n.clockItv=setInterval(function(){if(n.miliseconds<10)return clearInterval(n.clockItv),void(n.overReason=0);if(n.miliseconds%20==0){for(var s=document.getElementsByClassName("row"),o=0;o<s.length;o++){var r=s[o].style.top;r=i(r);var c=0;if(n.investEnough){n.miliseconds%40==0&&n.miliseconds<45e3&&(c=a*Math.ceil((45e3-n.miliseconds)/1e3)*.3)}else{n.miliseconds<52500&&n.miliseconds%40==0&&(c=a*Math.ceil((52500-n.miliseconds)/1e3)*.3)}s[o].style.top=r+2*a+c+"%"}if(n.faceBox.length>5){var l=n.faceBox.length-1,u=n.faceBox[l].data,d=u.filter(function(t,e){return 0==t.type&&0==t.status});if(d&&d.length>0)return n.hasWrong=!0,n.overReason=2,void clearInterval(n.clockItv)}s=document.getElementsByClassName("row");var m=n.faceBox.length-1,h=s[m].style.top;h=i(h),h-15*a>=0&&(n.faceBox.unshift(e(n)),n.faceBox=n.faceBox.slice(0,7),t.setImgSize(),0==n.showGame&&n.faceBox.length>1&&(n.showGame=!0))}n.miliseconds-=10},10))},1e3)},10)},onPush:function(t,e){var n=this;if(!this.isRoundOver){for(var i=-1,s=0;s<this.faceBox.length;s++)if(this.faceBox[s].rowno==t){i=s;break}if(i>=0){if(0!=this.faceBox[i].data[e].status)return;0==this.faceBox[i].data[e].type?(this.faceBox[i].data[e].status=1,this.score++,this.roundScore++):(this.faceBox[i].data[e].status=-1,clearInterval(this.clockItv),this.isRoundOver=!0,this.overReason=1,setTimeout(function(){n.hasWrong=!0},2e3)),this.faceBox=this.faceBox.slice(0)}}},sendPlayResult:function(){var e=this;if(!t.isLogin)return!1;var n={uid:t.uid,uuid:this.sign,smileNum:this.roundScore};this.__requestService(i.httpPlay,n,function(t){if(0==t.success)return(0,a.default)("warning",{props:{transition:"bounceIn",title:"系统提示",detail:t.errorMsg?t.errorMsg:"系统错误，请联系客服。",btnBackHome:!0}}),!1;e.chanceNum=t.map.totalchance,e.score=t.map.smileTotal,(0,a.default)("playResult",{props:{transition:"rotate3d",popState:0,chanceNum:e.chanceNum,investEnough:e.investEnough,score:e.score,roundScore:e.roundScore,overType:e.overReason}}),bus.$on("closePopEvent",function(){e.onBack()})})},onBack:function(){this.isOnBusy||(t.wap?window.location.replace(window.location.pathname+"#/?wap=true&uid="+t.uid):window.location.replace(window.location.pathname+"#/?uid="+t.uid))}}}}).call(e,n(1))},45:function(t,e){},60:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.gameBegin,expression:"!gameBegin"}],staticClass:"begin-mask img-size",attrs:{"data-fontSize":"150"}},[n("div",{staticClass:"counter"},[t._v(t._s(t.beginCounter))])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.gameBegin,expression:"gameBegin"}],staticClass:"main-section"},[n("div",{staticClass:"img-size content-wrapper",attrs:{"data-width":"750","data-height":"1334"}},[n("div",{staticClass:"dashboard img-size",attrs:{"data-top":"40","data-left":"170","data-borderRadius":"45","data-width":"480","data-height":"95","data-paddingLeft":"35","data-paddingRight":"35"}},[n("div",{staticClass:"small-smile img-size",attrs:{"data-height":"95","data-width":"40","data-fontSize":"30","data-lineHeight":"95"}}),n("span",[t._v(" × "+t._s(t.score))]),n("span",{staticClass:"timer img-size",attrs:{"data-right":"35","data-fontSize":"24","data-lineHeight":"95"}},[t._v("游戏计时 "+t._s(t.seconds)+" 秒")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.miliseconds>0&&!t.hasWrong,expression:"miliseconds > 0 && !hasWrong"}],staticClass:"play-box img-size",attrs:{"data-marginTop":"220","data-height":"560"}},t._l(t.faceBox,function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.showGame,expression:"showGame == true"}],key:e.rowno,staticClass:"row img-size",attrs:{"data-top":"-90","data-marginBottom":"60"}},t._l(e.data,function(i,s){return n("div",{key:i.faceno,staticClass:"face img-size",class:t._f("className")(i.type,t.investEnough),attrs:{"data-width":"90","data-height":"90","data-marginRight":"50"},on:{click:function(n){t.onPush(e.rowno,s)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:i.status>0,expression:"face.status > 0"}],staticClass:"check img-size",attrs:{"data-height":"87","data-width":"77"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.status<0,expression:"face.status < 0"}],staticClass:"fork img-size",attrs:{"data-height":"87","data-width":"64"}})])}))}))])])])},staticRenderFns:[]},t.exports.render._withStripped=!0}});