"use strict";var app=new Vue({el:"#APP",delimiters:["${","}"],data:function(){return{tag:{DRGK:!1,AQBZ:!1,YYBG:!1,NEWS:!1,GSDT:!1,LXWM:!1},result:{},total:"",maxCumulativeInvest:{},maxOnceInvest:{},maxInvestFrequency:{},maxRecommendFrequency:{}}},mounted:function(){this.setDefault(),this.setdz(),this.getUrl()},methods:{setdz:function(){var url=document.location.href,name=url.substr(url.length-9);url.indexOf("YYBG")>-1&&(name=url.substr(url.length-15));var name2=name.substr(0,4);this.setTag(name2)},setTag:function(name){var self=this;$.each(this.tag,function(key,val){self.tag[key]=!1}),self.tag[name]=!0},setDefault:function(){var url=document.location.href;url.indexOf("about")>-1&&(url.indexOf("guarantee")>-1?T.setNavCurrent("anqun"):T.setNavCurrent("about"))},getUrl:function(){var self=this,URL=window.location.href.split("/"),year=URL[URL.length-1].slice(4,8),month=URL[URL.length-1].slice(8,10).replace(/^0+/,"");document.getElementById("number").src="/images/about/report/number"+month+".png";var figure=document.getElementById("figure"),chartData=echarts.init(figure),zhuce=echarts.init(document.getElementById("figu")),userAge=document.getElementById("userAge"),chartAge=echarts.init(userAge),channel=echarts.init(document.getElementById("channel"));chartData.setOption({title:{text:" "},tooltip:{show:!1},legend:{data:[""]},grid:{x2:140,y2:80},textStyle:{color:"#fff"},xAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,formatter:function(value){return value.split("").join("\n")}},axisLine:{lineStyle:{color:"#ff4200",width:1}},data:[]},yAxis:{axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{color:"#ff4200",width:1}},interval:5,splitLine:{show:!1}},series:[{name:"",type:"bar",barWidth:15,itemStyle:{normal:{color:function(params){return["#ff4200","#ffa84b","#8ee8ff","#ad5a18","#af8c2e","#2188a2","#365d99","#328d83","#918c3c","#247893"][params.dataIndex]}}},label:{normal:{show:!0,position:"top",formatter:"{c}%"}},data:[]}]}),zhuce.setOption({title:{text:" "},tooltip:{show:!1},legend:{data:[""]},grid:{x2:140,y2:80},textStyle:{color:"#fff"},xAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,formatter:function(value){return value.split("").join("\n")}},axisLine:{lineStyle:{color:"#ff4200",width:1}},data:[]},yAxis:{axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{color:"#ff4200",width:1}},interval:5,splitLine:{show:!1}},series:[{name:"",type:"bar",barWidth:15,itemStyle:{normal:{color:function(params){return["#ff4200","#ffa84b","#8ee8ff","#ad5a18","#af8c2e","#2188a2","#365d99","#328d83","#918c3c","#247893"][params.dataIndex]}}},label:{normal:{show:!0,position:"top",formatter:"{c}%"}},data:[]}]}),chartAge.setOption({title:{text:" "},tooltip:{show:!1},legend:{data:[""]},grid:{x2:140,y2:80},textStyle:{color:"#fff"},xAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},axisLine:{lineStyle:{color:"#ff4200",width:1}},data:[]},yAxis:{axisLabel:{formatter:"{value}%"},axisLine:{lineStyle:{color:"#ff4200",width:1}},interval:5,splitLine:{show:!1}},series:[{name:"",type:"bar",barWidth:20,itemStyle:{normal:{color:function(params){return["#ff4200","#ffa84b","#8ee8ff","#ad5a18","#af8c2e","#2188a2","#365d99","#328d83","#918c3c","#247893"][params.dataIndex]}}},label:{normal:{show:!0,position:"top",formatter:"{c}%"}},data:[]}]}),channel.setOption({title:{show:!1},tooltip:{trigger:"item",show:!1,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",bottom:"left",selectedMode:!1,icon:"circle",textStyle:{color:function(params){return["#fe7634","#ffea5d","#0069cb","#00be6b","#af8c2e","#2188a2","#365d99","#328d83","#918c3c","#247893"][params.dataIndex]}},data:[]},series:[{type:"pie",radius:"55%",animation:!1,minAngle:2,data:[],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},normal:{color:function(params){return["#fe7634","#ffea5d","#0069cb","#00be6b","#af8c2e","#2188a2","#365d99","#328d83","#918c3c","#247893"][params.dataIndex]},label:{show:!0,formatter:"{d}%"},labelLine:{show:!0}}}}]});var provinceInvestRankList=[],provinceNumber=[],provinceRegisterRankList=[],provinceRegisterNumber=[],drOperationInvestClient=[],drOperationInvestClientNumber=[],drOperationInvestAge=[],drOperationInvestAgeNumber=[];T.ajax({url:"/operationReport/getOperationReport.do",data:{year:year,month:month},success:function(data){self.result=data.map.drOperationReport,self.total=100*data.map.drOperationReport.cumulativeTurnover,self.maxCumulativeInvest=data.map.drOperationReport.drOperationAboutMaxList[0],self.maxOnceInvest=data.map.drOperationReport.drOperationAboutMaxList[1],self.maxInvestFrequency=data.map.drOperationReport.drOperationAboutMaxList[2],self.maxRecommendFrequency=data.map.drOperationReport.drOperationAboutMaxList[3];for(var i=0;i<data.map.drOperationReport.drOperationProvinceInvestRankList.length;i++)provinceInvestRankList.push(data.map.drOperationReport.drOperationProvinceInvestRankList[i].region),provinceNumber.push(data.map.drOperationReport.drOperationProvinceInvestRankList[i].proportion);for(var j=0;j<data.map.drOperationReport.drOperationProvinceRegisterRankList.length;j++)provinceRegisterRankList.push(data.map.drOperationReport.drOperationProvinceRegisterRankList[j].region),provinceRegisterNumber.push(data.map.drOperationReport.drOperationProvinceRegisterRankList[j].proportion);for(var k=0;k<data.map.drOperationInvestClientVOList.length;k++)drOperationInvestClient.push(data.map.drOperationInvestClientVOList[k].name),drOperationInvestClientNumber.push(data.map.drOperationInvestClientVOList[k].proportion);for(var w=0;w<data.map.drOperationReport.drOperationInvestAgeList.length;w++)drOperationInvestAge.push(data.map.drOperationReport.drOperationInvestAgeList[w].age),drOperationInvestAgeNumber.push(data.map.drOperationReport.drOperationInvestAgeList[w].proportion);chartData.setOption({xAxis:{data:provinceInvestRankList},series:[{data:provinceNumber}]}),zhuce.setOption({xAxis:{data:provinceRegisterRankList},series:[{data:provinceRegisterNumber}]}),chartAge.setOption({xAxis:{data:drOperationInvestAge},series:[{data:drOperationInvestAgeNumber}]}),channel.setOption({legend:{data:drOperationInvestClient},series:[{data:data.map.drOperationInvestClientVOList}]})}})},numFormat:function(num){var arr=(num+"").split("");arr.reverse();for(var tmp="",i=1;i<=arr.length;i++)tmp+=arr[i-1],i%3==0&&i!=arr.length&&(tmp+=",");return tmp.split("").reverse().join("")}}});