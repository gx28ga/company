"use strict";(function(window){Date.prototype.Format=function(fmt){var o={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(fmt))fmt=fmt.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));for(var k in o){if(new RegExp("("+k+")").test(fmt))fmt=fmt.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}return fmt};var T={href:"/",pcUrl:"http://www.duorongcf.com",appUrl:"http://app.duorongcf.com",userInfo:null,isLogin:false,init:function init(){T.getBrowser();T.createElementBlock();T.getUserInfo();window.bus=new Vue;T.topbar();T.nav();T.navFixed()},getBrowser:function getBrowser(){var ua=navigator.userAgent.toLowerCase(),IS_IPAD=ua.match(/ipad/i)!=null,IS_IPHONE=!IS_IPAD&&(ua.match(/iphone/i)!=null||ua.match(/ipod/i)!=null),IS_IOS=IS_IPAD||IS_IPHONE,IS_ANDROID=!IS_IOS&&ua.match(/android/i)!=null,IS_MOBILE=IS_IOS||IS_ANDROID;T.Iphone=IS_IOS;T.Android=IS_ANDROID;T.browser={isIE:ua.search("msie")>-1,ie6:ua.search("msie 6.0")>-1,ie7:ua.search("msie 7.0")>-1,ie8:ua.search("msie 8.0")>-1,ie9:ua.search("msie 9.0")>-1,ie10:ua.search("msie 10.0")>-1,ie11:ua.search("msie 11.0")>-1,chrome:ua.search("chrome")>-1&&ua.search("qqbrowser")<0,safari:ua.search("safari")>-1&&ua.search("chrome")<0,firefox:ua.search("firefox")>-1};if(T.browser.isIE){if(T.browser.ie6||T.browser.ie7||T.browser.ie8){window.location.href="browser.html"}}},getUrlParam:function getUrlParam(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null},createElementBlock:function createElementBlock(){$.each(["article","aside","audio","canvas","footer","header","nav","section","video"],function(i,ele){document.createElement(ele)})},errorMsg:function errorMsg(val){var msg={1001:"交易密码错误，连续输错三次，交易密码将被锁定",1002:"产品已募集完",1003:"项目可投资金额不足",1004:"小于起投金额",1005:"非递增金额整数倍",1006:"投资金额大于项目单笔投资限额",1007:"账户可用余额不足",1008:"已投资过产品，不能投资新手产品",1009:"用户未登录",1010:"优惠券不可用",1011:"投资失败，请稍后再试",1012:"非首投用户，不能参与投多少送多少活动",2001:"交易密码已锁定",9919:"未满18岁用户无法进行投资",6666:"错误",9999:"系统错误",test:"网络错误"};if(msg[val]){return msg[val]}return"错误"},toFixed:function toFixed(num){var text=String(num).match(/\d+[\.|\d]{3}/);if(text){text=text[0]}else{text=num+".00"}return text},toInt:function toInt(num){if(num=="")return num;var val=String(num).match(/^\d+/);if(!val){return 0}else{return parseInt(val[0])}},toNumber:function toNumber(num){var val=String(num).match(/[\d]*[\.|\d]{0,3}/);if(!val){num=num.replace(val[0],"")}else{return val[0]}return num},isNumber2:function isNumber2(val){val=parseFloat(val);var mat=String(val).match(/^[0-9]+(\.{1}\d{2})/);if(/^[0-9]+(\.{1}\d{2})$/.test(val)){return val}if(/^[0-9]+(\.{1}\d{1})$/.test(val)){return String(val)+"0"}if(/^[0-9]+$/.test(val)){return String(val)+".00"}if(mat){return mat[0]}return"0.00"},justNumber:function justNumber(num,callback){var val=String(num).match(/[^\d]/);if(val){num=num.replace(val[0],"")}return num},maxfilter:function maxfilter(max,num){var text;if(num>=max){text=String(num/1e4).match(/\d+[\.|\d]{3}/);if(text){text=text[0]}else{text=num/1e4+".00"}text+="万"}else{text=num}return text},getScript:function getScript(src,callback){var head=document.head,s=document.createElement("script");s.src=src;s.onload=function(){callback()};head.insertBefore(s,head.firstChild)},format_number:function format_number(n){return parseFloat(n).toLocaleString()},goTop:function goTop(){$("body,html").animate({scrollTop:0},300)},go:{login:function login(){var search=window.location.search;window.location.href="/dl"+search},reg:function reg(){var search=window.location.search;window.location.href="/zhuce"+search},recharge:function recharge(){T.go.openEscrowAccount(function(){window.location.href="/main/myAccount/recharge"})},openEscrowAccount:function openEscrowAccount(callback){var loginInfo=T.getLoginInfo();if(loginInfo&&loginInfo.isRas==true){return callback()}$('\n\t\t\t\t\t<div class="child">\n\t\t\t\t\t\t<pop ref="pop" :obj="win">\n\t\t\t\t\t\t    <div slot="content" style="padding: 10px 20px;">\n\t\t\t\t\t\t       <img src="/images/escrow-account/upgrade-mark.jpg">\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t    <div slot=\'footer\'>\n\t\t\t\t\t\t    \t<a class="btn" href="/activitys/huaruiBank" target="_blank" style="margin-right:10px;border: 1px solid #fd9927;color: #fd9927;background:#fff;">了解银行存管</a>\n\t\t\t\t\t\t    \t<div @click="activate" class="btn" >激活存管账户</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</pop>\n\t\t\t\t\t</div>\n\t\t\t\t').appendTo("body");new Vue({el:".child",data:function data(){return{win:{footer:true}}},mounted:function mounted(){this.$refs.pop.show()},methods:{activate:function activate(){location.href="/main/createEscrowAccount"}}})}},clearUserInfo:function clearUserInfo(){T.isLogin=false;T.userInfo=null;window.localStorage.removeItem("ngStorage-user");window.localStorage.removeItem("user");window.localStorage.removeItem("userInfo");bus.$emit("userInfo",{isLogin:false,userInfo:null})},getID:function getID(){return location.href.match(/\d+\.html/)[0].replace(".html","")},getLocalInfo:function getLocalInfo(){return JSON.parse(localStorage.getItem("user"))},getLoginInfo:function getLoginInfo(){return JSON.parse(localStorage.getItem("userInfo"))},getUserInfo:function getUserInfo(callback){T.ajax({url:"/indexMemberInfo",callback:true,success:function success(_data){if(_data.success){T.userInfo=_data.map;localStorage.setItem("user",JSON.stringify(_data.map));localStorage.setItem("ngStorage-user",JSON.stringify(_data.map));if(_data.map.realName==""||_data.map.realName==undefined){T.userInfo.realName="亲爱的用户"}T.islogin=true;bus.$emit("userInfo",{isLogin:true,userInfo:T.userInfo})}},complete:function complete(obj){try{if(obj.responseJSON.success!==true){T.clearUserInfo()}}catch(e){T.clearUserInfo()}}})},exit:function exit(){T.ajax({url:"/exit",callback:true,complete:function complete(_data){T.clearUserInfo();location.reload()}})},topbar:function topbar(){var topbar=document.getElementById("Topbar");if(topbar){new Vue({el:"#Topbar",delimiters:["${","}"],data:{isLogin:T.isLogin,userInfo:T.userInfo},mounted:function mounted(){var self=this;bus.$on("userInfo",function(obj){self.isLogin=obj.isLogin;self.userInfo=obj.userInfo})},methods:{login:T.go.login,reg:T.go.reg}})}},nav:function nav(){var nav=document.getElementById("navContent");if(nav){T.Nav=new Vue({el:"#navContent",delimiters:["${","}"],data:{isLogin:T.isLogin,userInfo:T.userInfo,nav:{home:true,dq:false,pj:false,xs:false,anqun:false,about:false}},mounted:function mounted(){var self=this;bus.$on("userInfo",function(obj){self.isLogin=obj.isLogin;self.userInfo=obj.userInfo})},methods:{login:T.go.login,setNav:function setNav(name){var self=this;$.each(this.nav,function(key,val){self.nav[key]=false});self.nav[name]=true}}})}},setNavCurrent:function setNavCurrent(name){T.Nav.setNav(name)},navFixed:function navFixed(){var head=$(".header-wrapper"),transition=head.find(".transition"),clearTime;if(!head.length)return;function setTime(demo,t,callback){demo.css({"transition-duration":t});demo.css({"-ms-transition-duration":t});if(callback){setTimeout(callback,parseInt(t)+20)}}$(window).scroll(function(){var height=head.height()+head.offset().top,scrollTop=$(document).scrollTop();clearTimeout(clearTime);if(scrollTop>height){clearTime=setTimeout(function(){setTime(transition,"0s",function(){setTime(transition,"1s",function(){transition.addClass("hover")})});transition.addClass("fixed")},200)}else{transition.removeClass("fixed hover")}})},getUrl:function getUrl(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return null},getidx:function getidx(){return JSON.parse(localStorage.getItem("idxname"))},ajax:function ajax(obj){obj.complete=obj.complete||function(){};obj.data=obj.data||{time:"2017"};$.ajax({url:obj.url,type:"POST",dataType:"json",accept:"application/json, text/plain",contentType:"application/json;charset=UTF-8",processData:false,data:JSON.stringify(obj.data),success:function success(data){obj.success&&obj.success(data)},complete:obj.complete,error:function error(){}})},getQueryString:function getQueryString(name){var reg=new RegExp("(^|&|/?)"+name+"=([^&]*)(&|$)","i");var r=encodeURI(window.location.search||window.location.href||window.location.hash).substr(1).match(reg);if(r!=null)return unescape(r[2]);return null}};T.init();window.T=T})(window);